{"version":3,"file":"_items.js","sources":["../../../../../common/src/validate/keywords/_items.js"],"sourcesContent":["import ERROR_PARAMS from \"../_ERROR_PARAMS\";\nconst keyword = \"_items\";\nlet message;\n\nfunction validate(schema, data, parentSchema, dataCtx) {\n  const {\n    // 不知道是啥\n    dynamicAnchors,\n    // 推測／被當前schema校驗的整個data\n    rootData,\n    // 推測／包含當前data的父級數據\n    parentData,\n    // 推測／parentData的key\n    parentDataProperty,\n    // 推測／當前data位於rootData的位置\n    instancePath,\n  } = dataCtx;\n\n  if (![\"string\", \"number\", \"boolean\"].some((item) => item === schema)) {\n    console.warn(\"keyword「_items」的schema值只能指定 string|number|boolean\");\n  }\n\n  const invalid = data.some((item) => {\n    return typeof item !== schema;\n  });\n\n  if (invalid) {\n    validate.errors = [\n      {\n        keyword: \"myKeyword\",\n        message: `必須由${schema}類型組成`,\n        params: {\n          errors: [\n            {\n              keyword,\n              params: { [ERROR_PARAMS._items]: instancePath.split(\"/\").pop() },\n            },\n          ],\n        },\n      },\n    ];\n  }\n\n  return !invalid;\n}\n\nexport default {\n  keyword,\n  type: \"array\",\n  schemaType: \"string\",\n  validate,\n  errors: true,\n};\n"],"names":["ERROR_PARAMS"],"mappings":";;;AACA,MAAM,UAAU;AAGhB,SAAS,SAAS,QAAQ,MAAM,cAAc,SAAS;AACrD,QAAM;AAAA;AAAA,IAEJ;AAAA;AAAA,IAEA;AAAA;AAAA,IAEA;AAAA;AAAA,IAEA;AAAA;AAAA,IAEA;AAAA,EACJ,IAAM;AAEJ,MAAI,CAAC,CAAC,UAAU,UAAU,SAAS,EAAE,KAAK,CAAC,SAAS,SAAS,MAAM,GAAG;AACpE,YAAQ,KAAK,mDAAmD;AAAA,EACpE;AAEE,QAAM,UAAU,KAAK,KAAK,CAAC,SAAS;AAClC,WAAO,OAAO,SAAS;AAAA,EAC3B,CAAG;AAED,MAAI,SAAS;AACX,aAAS,SAAS;AAAA,MAChB;AAAA,QACE,SAAS;AAAA,QACT,SAAS,MAAM,MAAM;AAAA,QACrB,QAAQ;AAAA,UACN,QAAQ;AAAA,YACN;AAAA,cACE;AAAA,cACA,QAAQ,EAAE,CAACA,cAAAA,QAAa,MAAM,GAAG,aAAa,MAAM,GAAG,EAAE,MAAO;AAAA,YACjE;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EACL;AAEE,SAAO,CAAC;AACV;AAEA,MAAe,SAAA;AAAA,EACb;AAAA,EACA,MAAM;AAAA,EACN,YAAY;AAAA,EACZ;AAAA,EACA,QAAQ;AACV;;"}